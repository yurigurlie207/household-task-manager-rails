
<%= form_for @task do |f| %>
    <% if @task.errors.any? %>
    <div id="error_explanation">
    <h2>
    <%= pluralize(@task.errors.count, "error") %>
    prohibited this post from being saved:
  </h2>
      <ul>
        <% @task.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
          <p>
    <%= f.label :title %>
    <%= f.text_field :title %>
          </p>

          <p>
    <%= f.label :deadline %>
    <%= f.date_field :deadline %>
    </p>

    <p>
    <%= f.label :notes %>
    <%= f.text_area :notes %>
    </p>
    
    <% if request.env['PATH_INFO'] =~ /.*new.*/ %>
        <p><h3>Create at least One Subtask for this task</h3></p>
        
            <%= f.fields_for :subtasks do |subtask_builder| %>
                <!-- user[addresses_attributes][][street1]
                     task[subtask_attributes][][title]
                     -->
              <p>
                <%= subtask_builder.label :title %>
                <%= subtask_builder.text_field :title %>
              </p>

              <p>
                <%= subtask_builder.label :estimated_duration%>
                <%= estimated_select(subtask_builder) %>
              </p>

              <p>
                <%= subtask_builder.label :actual_duration%>
                <%= actual_select(subtask_builder) %>
                </p>

            <p>
                <%= subtask_builder.label :priority %>
                <%= priority_select(subtask_builder) %>
                </p>
            
                <p>
                <%= subtask_builder.label :notes %>
                <%= subtask_builder.text_area :notes %>
                </p>

                <h4>It is recommended you assign one Household Member to Subtask</h4>
                <%= subtask_builder.collection_check_boxes :user_ids, User.all, :id, :username %>

            <% end %>
    <% end %>


    <br><br>
  

    <%= f.submit %>

<% end %>